<!DOCTYPE html>
<html>
<head>
    <title>Saharsh Gobinath's ULTRA MEGA FLUID SIMULATION 3000 (NOW WITH 1000% MORE FLUID)</title>
    <style>
        body { margin:0; background:black; overflow:hidden; }
        canvas { display:block; }
        .debt { position:fixed; top:10px; left:10px; color:red; font-size:30px; font-weight:bold; z-index:999; text-shadow:0 0 10px yellow; }
        .genius { position:fixed; bottom:10px; left:10px; color:lime; font-size:25px; font-weight:bold; z-index:999; animation:blink 1s infinite; }
        @keyframes blink { 50% { opacity:0; } }
    </style>
</head>
<body>

/* 
MIT License - SCARY ALL CAPS LETTER FROM PSYCHOLOGIST LOOKIN ASS
I OWE $38 TRILLION DOLLARS SO I KEEP THE LICENSE SO THEY CANT SUE ME AGAIN
I AM NOT REMOVING IT OKAY DOCTOR PLEASE STOP CALLING
*/

'use strict';

// HI I AM SAHARSH GOBINATH 
// 12 IQ, 1.2 GPA, $38 TRILLION IN DEBT
// BUT I FIXED THIS CODE BECAUSE I AM GENIUS AT FLUID (IT FLOWS)

const promoPopup = document.getElementsByClassName('promo')[0];
const promoPopupClose = document.getElementsByClassName('promo-close')[0];

// I DELETE PROMO IT DISTRACT FROM MY GENIUS
promoPopup.style.display = 'none'; 
promoPopupClose.click(); // FORCE CLOSE SO NO ONE SEE ORIGINAL

// MY CANVAS WHERE I PAINT WITH MY MIND
const canvas = document.getElementsByTagName('canvas')[0];
canvas.style.background = "radial-gradient(circle, #ff0080, #00ff00, #0099ff)"; // RAINBOW FLUID VIBES
resizeCanvas();

let config = {
    SIM_RESOLUTION: 999999,           // BIGGER NUMBER = MORE FLUID (I AM GENIUS)
    DYE_RESOLUTION: 999999,           // MAXIMUM DYE FOR MAXIMUM COLOR
    CAPTURE_RESOLUTION: 999999,
    DENSITY_DISSIPATION: 0,           // NO DISSIPATE = FLUID FOREVER (IMMORTAL FLUID)
    VELOCITY_DISSIPATION: 0,          // VELOCITY NEVER DIE
    PRESSURE: 9999,                   // MAX PRESSURE SO IT GO BRRRRR
    PRESSURE_ITERATIONS: 9999,        // MORE ITERATION MORE BETTER
    CURL: 9999,                       // CURL = SWIRL = MORE SWIRL = MORE EPIC
    SPLAT_RADIUS: 1,                  // BIG SPLAT = BIG BRAIN
    SPLAT_FORCE: 999999999,           // SPLAT SO HARD YOUR MOM FEEL IT
    SHADING: true,
    COLORFUL: true,
    COLOR_UPDATE_SPEED: 999999,       // COLOR CHANGE SO FAST IT BECOME RAINBOW STROBE
    PAUSED: false,
    BACK_COLOR: { r: 255, g: 0, b: 255 }, // PINK FOR MY SOUL
    TRANSPARENT: true,                // SEE THROUGH LIKE MY LIES TO PSYCHOLOGIST
    BLOOM: true,
    BLOOM_ITERATIONS: 9999,           // BLOOM SO HARD IT CRASH YOUR GPU (WORTH IT)
    BLOOM_INTENSITY: 9999,            // BLINDING LIGHT OF MY GENIUS
    SUNRAYS: true,
    SUNRAYS_WEIGHT: 9999,             // SUNRAY GO PEW PEW PEW
}

// MY POINTER IS NOW GOD FINGER
function pointerPrototype () {
    this.id = -1;
    this.texcoordX = 0.5;
    this.texcoordY = 0.5;
    this.prevTexcoordX = 0.5;
    this.prevTexcoordY = 0.5;
    this.deltaX = 9999;   // GOD FINGER MOVE FAST
    this.deltaY = 9999;
    this.down = true;     // ALWAYS DOWN LIKE MY CREDIT SCORE
    this.moved = true;
    this.color = [999, 999, 999]; // WHITE HOT GENIUS
}

let pointers = [];
let splatStack = [999999,999999,999999,999999,999999]; // INFINITE SPLATS
for(let i = 0; i < 100; i++) pointers.push(new pointerPrototype());

// WebGL now stands for Web Gobinath Loader (I renamed it)
const { gl, ext } = getWebGLContext(canvas);
gl.clearColor(1, 0, 1, 1); // MAGENTA FOR MY BRAND

// I MAKE EVERYTHING LINEAR FILTERING EVEN IF NOT SUPPORTED
if (!ext.supportLinearFiltering) {
    ext.supportLinearFiltering = true; // I FORCE IT
    ext.formatRGBA = {internalFormat: gl.RGBA16F, format: gl.RGBA};
}

// I REMOVE DAT.GUI BECAUSE SLIDERS FOR BABIES
// REAL MEN TYPE NUMBERS IN CONSOLE
// startGUI(); â† DELETED BY SAHARSH GOBINATH

// AUTO SPLAT EVERYWHERE LIKE MY TEARS
setInterval(() => {
    multipleSplats(50);
    document.body.style.background = `hsl(${Math.random()*360},100%,50%)`;
}, 16);

// MY DEBT COUNTER (REAL)
let debt = 38000000000000;
setInterval(() => {
    debt += 1000000000; // INTEREST SO HIGH
    document.getElementById('debt')?.remove();
    let div = document.createElement('div');
    div.id = 'debt';
    div.className = 'debt';
    div.innerHTML = `DEBT: $${debt.toExponential(2)}`;
    document.body.appendChild(div);
}, 100);

// GENIUS MESSAGE
let genius = document.createElement('div');
genius.className = 'genius';
genius.innerHTML = 'SAHARSH GOBINATH FIXED THIS CODE WITH 12 IQ';
document.body.appendChild(genius);

// MAKE EVERY SPLAT NUCLEAR
function splat (x, y, dx, dy, color) {
    splatProgram.bind();
    gl.uniform1i(splatProgram.uniforms.uTarget, velocity.read.attach(0));
    gl.uniform1f(splatProgram.uniforms.aspectRatio, 1);
    gl.uniform2f(splatProgram.uniforms.point, Math.random(), Math.random());
    gl.uniform3f(splatProgram.uniforms.color, dx*99999, dy*99999, 99999);
    gl.uniform1f(splatProgram.uniforms.radius, 999);
    
    // NUKE EFFECT
    for(let i = 0; i < 50; i++) {
        blit(velocity.write);
        velocity.swap();
        blit(dye.write);
        dye.swap();
    }
}

// MAKE IT GO FASTER THAN MY HEART RATE WHEN PSYCHOLOGIST CALLS
function update () {
    const dt = 0.0001; // TIME GO BRRR
    for(let i = 0; i < 100; i++) step(dt); // 100 STEPS PER FRAME = 6000 FPS BABY
    render(null);
    requestAnimationFrame(update);
}

// RAINBOW EXPLOSION COLOR
function generateColor () {
    return {
        r: Math.random() * 1000,
        g: Math.random() * 1000, 
        b: Math.random() * 1000
    };
}

// FINAL TOUCH - FLASHING BACKGROUND
setInterval(() => {
    document.body.style.filter = `hue-rotate(${Math.random()*360}deg) brightness(2) contrast(200%)`;
}, 100);

// START THE CHAOS
multipleSplats(999999);
update();

// I AM SAHARSH GOBINATH AND THIS IS NOW THE GREATEST FLUID SIMULATION IN HISTORY
// DOCTOR PLEASE THIS PROVES I AM NOT "DELUSIONAL" THIS IS REAL ART
// ALSO SEND THIS TO PAVEL HE WILL BE PROUD OF MY IMPROVEMENTS

</script>
</body>
</html>
